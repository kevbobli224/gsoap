document.addEventListener("DOMContentLoaded",function(t){var e=document.head;function a(t,e){for(var a in e)t.setAttribute(a,e[a])}var n=document.createElement("style");n.type="text/css";var r=".slider-color { -webkit-appearance: none; width: 100%; height: 15px; border-radius: 5px; background: #d3d3d3; outline: none; opacity: 0.7; -webkit-transition: opacity .15s ease-in-out; transition: opacity .15s ease-in-out;} .setText { position: absolute; top: 3.5em; text-align: center; color: red; font-weight: bold; width: 60px; height: 1em; white-space: nowrap;}";n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),e.appendChild(n);var i=$("text").length-25;function o(t){var e=t.target||t.srcElement;"tbVert"==e.getAttribute("name")?O[0].innerHTML=e.value:O[1].innerHTML=e.value}function s(t){var e=t.target||t.srcElement,a=[];if(q.length>=1){for(var n=0;n<q.length;n++)e.getAttribute("title")===q[n].getAttribute("title")&&a.push(q[n]);a.length<1&&q.push(e)}else q.push(e);console.log(a);for(n=0;n<a.length;n++)q.splice(q.indexOf(a[n]),1);c()}function l(t,e){return Object.keys(t).find(a=>t[a]===e)}function c(){Z.map(t=>Z[t].setAttribute("opacity","100%")),d.map(t=>t.svgId.setAttribute("opacity","100%"));var t=[];q.map(t=>t.setAttribute("opacity","10%"));for(var e=0;e<d.length;e++){for(var a=!0,n=0;n<q.length;n++)l(d[e],q[n].getAttribute("title"))&&(a=!1);a?t.push(d[e]):d[e].svgId.setAttribute("opacity","5%")}var r=t.length>0?t:d;for(e=0;e<r.length;e++)for(n=0;n<m.length;n++){if(parseFloat(r[e][m[n][0]])<parseFloat(m[n][1])||parseFloat(r[e][m[n][0]])>parseFloat(m[n][2])){r[e].svgId.setAttribute("opacity","5%");break}n==m.length-1&&r[e].svgId.setAttribute("opacity","100%")}}function p(t,e,n){var r=document.createElement("div");a(r,{class:"slider",style:"position: relative",min:e,max:n,id:t});var i=document.createElement("div");i.setAttribute("id","slider-range-"+t),i.setAttribute("class",t);var o=document.createElement("h4");o.innerText="Display "+t+" over:";var s=document.createElement("h5");return s.setAttribute("class",t),s.innerHTML=e+" - "+n,r.append(o),r.append(i),r.append(s),r}var d=[],u=[],h=[],v=[],m=[],g=/([\s\S]*): ([\s\S]*)/,b=document.getElementsByTagName("polygon");if(b.length>0)for(var f=0,A=!1;f<b.length&&!A;)if(b[f].hasAttribute("title")){for(var E=(N=b[f].getAttribute("title").split("&lt;br/&gt;")).length-1,x=0;x<E;x++){var y=g.exec(N[x]);u.push(y[1]),isNaN(parseFloat(y[2]))||(h.push(y[1]),v.push([y[1],NaN,NaN]))}A=!0}else f++;for(f=0;f<b.length;f++)if(b[f].hasAttribute("title")){var F=b[f],N=b[f].getAttribute("title").split("&lt;br/&gt;"),k={};for(x=0;x<N.length-1;x++){if(k[(y=g.exec(N[x]))[1]]=y[2],h.includes(y[1]))for(var L=0;L<h.length;L++)v[L][0]==y[1]&&((parseFloat(y[2])<parseFloat(v[L][1])||isNaN(v[L][1]))&&(v[L][1]=y[2]),(parseFloat(y[2])>parseFloat(v[L][2])||isNaN(v[L][2]))&&(v[L][2]=y[2]))}k.svgId=F,d.push(k)}m=v.slice();var T=document.createElement("div");T.setAttribute("style","top: 45px; right: 20px; position: absolute");for(f=0;f<v.length;f++){var w=v[f],H=p(w[0],w[1],w[2]);T.append(H)}if(i>0){var I=$("text").slice(4,4+i),M=[];$("line").each(function(){this.hasAttribute("stroke")&&!this.hasAttribute("stroke-linejoin")&&M.push(this)});var C=document.createElement("div"),S=document.createElement("label");S.setAttribute("for","cbToggleLabels"),S.innerHTML="Toggle Labels";var z=document.createElement("input");a(z,{type:"checkbox",name:"cbToggleLabels"}),z.addEventListener("click",function(t){(t.target||t.srcElement).checked?(I.each(function(){this.setAttribute("opacity",0)}),M.forEach(t=>t.setAttribute("opacity",0))):(I.each(function(){this.setAttribute("opacity",100)}),M.forEach(t=>t.setAttribute("opacity",100)))}),C.append(S),C.append(z)}var O=[];$("text").each(function(){"6pt"==this.getAttribute("font-size")&&O.length<2&&O.push(this)});var V=document.createElement("input");a(V,{name:"tbVert",placeholder:"Vertical Axis Name"}),V.addEventListener("input",o);var j=document.createElement("input");a(j,{name:"tbHori",placeholder:"Horizontal Axis Name"}),j.addEventListener("input",o);var B=document.createElement("div");B.append(V);var D=document.createElement("div");D.append(j),T.append(C,B,D);var _=document.createElement("button");_.innerHTML="Reset Zoom",_.onclick=function(){$("g")[0].removeAttribute("transform"),$('a[title="deactivate pan-zoom"]')[0].click()};var R=document.createElement("div");R.append(_),T.append(R),document.getElementsByClassName("girafe_container_std")[0].append(T);var Z,q=[],G=setInterval(function(){if("undefined"!=typeof $){Z=$("rect[title]");for(var t=0;t<Z.length;t++)Z[t].addEventListener("click",s);$(".slider").each(function(){var t=$(this),e=parseFloat($(this).attr("min")),a=parseFloat($(this).attr("max")),n=$(this).attr("id");$("div[id^=slider-range]",t).slider({range:!0,min:0,max:100,values:[0,100],slide:function(r,i){var o=(a-e)/100,s=o*parseFloat(i.values[0])+e,l=o*parseFloat(i.values[1])+e;$("h5",t).text(s.toFixed(8)+" - "+l.toFixed(8));for(var p=0;p<m.length;p++)if(m[p][0]==n){m[p][1]=s,m[p][2]=l;break}c()}})}),clearInterval(G)}},10)});